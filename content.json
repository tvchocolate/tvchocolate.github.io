{"posts":[{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2022/08/21/hello-world/"},{"title":"","text":"yt-dlp下载b站视频并用ffmpeg批次提取音频最近在用iTunes导入歌曲，之前是从b站下载视频转码到mp4，提取音频转码到mp3再导入iTunes，这一串流程导致最终听到的歌曲糊的不行，必须改一改这个笨方法。 1. yt-dlp下载视频之前从b站下载视频一直使用的是youtube-dl工具，最近经常性出现连接不上的问题下载卡住，如下图： 于是尝试使用yt-dlp爬取视频，yt-dlp是一个youtube-dlp的fork，并且基于如今不在活跃的youtube-dlc而开发，因此其使用方式也与youtube-dl高度重合。 下载安装下载地址：https://github.com/yt-dlp/yt-dlp ，下载安装后记得配置环境变量哦~ 直接使用pip下载安装： python3 -m pip install -U yt-dlp 这里我在conda虚拟环境中用pip直接安装就不需要配置环境变量了。 使用：下载视频只需要复制网址，并在terminal内使用yt-dlp即可下载视频到当前目录： 1yt-dlp https://www.xxxxxxx.com/xxxx/xxxxx 一些常用参数： 123-a, --batch-file FILE 批次处理文件中的url-o, --output [TYPES:]TEMPLATE 指定输出文件名模板及输出目录-f, --format FORMAT 指定视频格式 关于yt-dlp的更详细文档：https://github.com/yt-dlp/yt-dlp#readme 我在下载时实际使用的命令： 1yt-dlp -a url.txt -o f:/song/video/%(title)s.%(ext)s 不知道为什么b站的视频下载好后都是.m4s后缀的文件。 使用：传入cookies一些情况下，我们下载一些视频需要进行鉴权（比如：某视频平台需要会员，才可以下载高清视频）。但是，我们浏览器上已经登录会员了，yt-dlp如何调取呢？ 这个时候，就可以用yt-dlp的特性：调取浏览器Cookies： --cookies-from-browser：从浏览器调取cookies，你也可以指定浏览器，比如：--cookies-from-browser chrome就是调取chrome浏览器的cookies。 目前支持的浏览器选项：brave, chrome,chromium, edge, firefox, opera, safari,vivaldi。 示例： 1yt-dlp --cookies-from-browser chrome https://www.xxxxxxx.com/xxxx/xxxxx 2. ffmpeg批次提取音频下载好视频后，就要从中提取音频，这里使用ffmepg进行成批提取，一行命令搞定： 1for /r %a in (*.m4s) do ffmpeg -i &quot;%~na.m4s&quot; -vn -codec copy &quot;%~na.m4a&quot; 上述命令的含义：在当前目录中遍历.m4s后缀的文件，输入ffmpeg中，复制输入文件的原编解码器，以原文件名加.m4a后缀输出。 .m4a是一种音频文件格式，是以mp4格式所创建的纯音频文件，其只是一种容器，m4a文件能在压缩的同时拥有无损的音质，该格式广泛用于苹果设备中。iTunes支持导入mp3和m4a格式的音频文件，以前导入的mp3音频听起来实在糊耳朵，这里提取为m4a音频。 如果有其他需要当然也可以提取为其他格式的音频，比如aac、wav等高音质格式。","link":"/2022/08/22/2022-8-22/"}],"tags":[],"categories":[],"pages":[]}